"# react tut"

React was built to solve one problem:
building large applications with data that changes over time

INSTALLATION
https://facebook.github.io/react/docs/installation.html

npm install -g create-react-app
create-react-app first-app

cd first-app
npm start


1.
React can be used as the v in MVC
ES2015
writing React components

component-based architecture

component in React is like a JS function
- it generates output every time it is invoked

Virtual DOM
 - in-mem representation of DOM generated by React components
  before any changes are made to the page

  Virtual DOM -> (actual) HTML
  diffing - allows React to minimize changes to the DOM as a result of
        user actions, increasing browser performance

        i.e. only the HTML elements updated are replaced


=== writing our first component ===
babel - ES2015 and JSX


- inherit from React.Component
- must have a render() function
- render() returns markup using JSX
- tell app where to put it in the webpage


1b =====================

JSX can be mixed with JS
to insert JS code into JSX, {}


2 =================
building a commenting app
2 components
- CommentBox
- Comment

good idea to layout component in HTML first before
putting it in React

React components receive arguments through "Props"

3==================
state changes

SHOW/HIDE comments

manipulating DOM
1. Direct DOM manipulation - jQuery, Backbone, etc
2. Indirect DOM manipulation - React

jQuery - event listeners
React - modify component state object
        events -> update state -> DOM updates

state - JS object that lives inside each component
        access via this.state

init state in component constructor()
and change by calling setState()
access by using this.state

cause state change:
- button/link click, AJAX call

4=== synthetic events to capture user actions ===

new component CommentForm
child of CommentBox, above the Comments list

"refs"
- assign form (input element) values to properties on the component object
    so we can access these values


<input placeholder="Name:"
    ref={(input) => this._author = input }/>
<textarea placeholder="Comment:"
    ref={(textarea) => this._body = textarea}></textarea>

equivalent to:

ref={
    function(input) {
        this._author = input;
    }.bind(this)
}


React runs "ref" callbacks on render

Parent CommentBox passes function to CommentForm
so that CommentForm can propagate data for new comments to CommentBox

-> functions in JS are "first-class" citizens, so we can pass them as
props to other components <-

concat() vs push()

// array references help React stay fast instead of mutating object
this.setState({ comments: this.state.comments.concat([comment]) });


Event handling in React:
to ensure events have consistent properties across browsers,
React wraps browser's native events into
"synthetic events" as one consolidated browser behavior API

list of React synthetic events
https://facebook.github.io/react/docs/events.html

e.g.
onSubmit - may differ within browsers

5==============
talking to remote servers
using lifecycle methods to load comments

use jQuery for AJAX requests

cant call fetchCOmments from render since fetchComments() calls setState,
which calls render -> INFINITE LOOP

use React Lifecycle Methods
- get called while component is rendered for the first time or about to be
removed from the DOM

1. constructor()
2. componentWillMount()     -> before render
3. render()
4. componentDidMount()      -> after render
5. componentWillUnmount()

"mounting" means rendering for the first time
"unmounting" getting removed from DOM

getting periodic updates from server - "polling"